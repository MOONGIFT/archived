---
layout: post
title: "直接アクセスできない画像を読み込む「refchop」"
date: 2011-01-03T09:00:00+09:00
categories:
- ソフトウェア
- Web
tags: 
- プログラミング言語 - Ruby
- ホスティング - github
- 画像
- ライセンス - フリーウェア
- フレームワーク - Sinatra
- プロキシ
permalink: /2011/01/20110103/
catch: https://images.moongift.jp/2010/12/ScreenShot%EF%BC%882010-12-22-11.59.06%EF%BC%89.png
id: 24298
---
  

refchopはWebブラウザに変わってリファラーを付与した画像へのアクセスを行うWebプロキシ。

[/s2If]  
  

refchopはRuby/Sinatra製のフリーウェア（ソースコードは公開されている）。ニュースサイトやECサイトなどで、画像の直接アクセスを禁止している所は少なくない。今は止めているようだが、かつてITmediaが禁止していた。

  

![ScreenShot（2010-12-22 11.58.56）.png](https://images.moongift.jp/2010/12/ScreenShot（2010-12-22-11.58.56）.png)

  

**refchop経由でのアクセス**

  

この直接アクセスを禁止する場合に使っているのはリファラーチェックだ。リファラーが同じサイトでない場合、アクセスを禁止するというやり方だ。そんな垣根を乗り越えるべき開発されているのがrefchopだ。

  
<!--more-->

refchopはSinatraで作られたごく小さなWebアプリケーションで、refchopにアクセスしたい画像のURLを付けてアクセスすると該当サイトのリファラーを追加してWebアクセスする。リファラーを偽装する自体はシステムからは特に難しくないことだ。

  

![ScreenShot（2010-12-22 11.59.06）.png](https://images.moongift.jp/2010/12/ScreenShot（2010-12-22-11.59.06）.png)

  

**普通にアクセスするとエラー**

  

refchopがプロキシとしてWebブラウザの代わりに該当サイトにアクセスし、データをそのまま返却する形になる。多用することはないかも知れないが、直接アクセスを禁止されているサイトのデータにどうしてもアクセスしたい場合に使えるだろう。

[s2If !current\_user\_can(access\_s2member\_level1)]  
  

**[MOONGIFTは読者の皆さまのサポートによって運営されています。ぜひプレミアム登録お願いします！月 額500円の他、半年（3,000円）、年間パック（6,000円）もあります。！](http://www.moongift.jp/moongift_premium/)　[プレミアムユーザのログインはこちらから](#)**

[/s2If]  
  
  

**MOONGIFTはこう見る**

  

直接アクセスを禁止する理由としては、画像データが盗まれたり、画像ファイルの保管庫として使われることに対する懸念だろう。確かに画像データだけにアクセスされても広告も載せられず認知度にもつながらず単なるトラフィック負担にしかならない。

  

とは言え利用者の立場から言えば自分のブログ内のコンテンツであれば自由に使ったり、引用したりしたいと思うはずだ。どちらにも言い分はあるだろうが、技術的にはrefchopのような手法で解決してしまうなら防止策としては弱いと言えるのではないだろうか。

  

[デモ](http://jsfiddle.net/7ELhA/)

[/s2If]  
  

[cherenkov/refchop - GitHub](https://github.com/cherenkov/refchop)

  
