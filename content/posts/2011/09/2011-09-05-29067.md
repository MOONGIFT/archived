---
layout: post
title: "扱い勝手の悪いCSVに立ち向かえ「Fight CSV!」"
date: 2011-09-05T12:00:00+09:00
categories:
- ソフトウェア
- オープンソース
tags: 
- プログラミング言語 - Ruby
- ホスティング - github
- ライセンス - MIT License
- 開発
- 技術 - テキスト
- 技術 - CSV
permalink: /2011/09/20110905-2/
catch: https://images.moongift.jp/2011/08/ScreenShot2011-08-22-10.53.22_thumb.png
id: 29067
---
Fight CSV!はCSVの各行をオブジェクト化することでシステムからの扱いを容易にするライブラリ。

  

Fight CSV!はRuby製のオープンソース・ソフトウェア。システム開発を行う際にCSVを扱うケースは多々ある。データをまとめて放り込んだり、一括更新したりする時に使われるケースが多い。しかしシステムで扱う時にはとても面倒なフォーマットだ。

  

[![](https://images.moongift.jp/2011/08/ScreenShot2011-08-22-10.51.42_thumb.png)](https://images.moongift.jp/2011/08/ada39193cb5a00e5922874666e7e0ea1.png)  
**利用中**

  

CSVを扱いやすくするライブラリは多いが、項目をばらす程度で後は配列のキーごとに処理を書いていかなければいかない。これはバグをはらみやすいし、値のチェックも大変だ。そこで使ってみたいのがFight CSV!だ。

  
<!--more-->  

Fight CSV!はクラスを定義して、CSVのヘッダーに定義されている項目ごとに処理分けを書くことで、CSVの各行をオブジェクトとして扱えるようにするライブラリだ。各カラムごとに処理を書けるので、バリデーションしたり、文字列を日付に変更するようなコンバート処理も書ける。

  

[![](https://images.moongift.jp/2011/08/ScreenShot2011-08-22-10.53.22_thumb.png)](https://images.moongift.jp/2011/08/a6bc51e58f7458bd5324670aa8944dab.png)  
**コンバータが便利！**

  

さらにCSVのヘッダーがない場合も、数字ごとにヘッダーとして展開することで同様に分かりやすい処理が書けるようにできる。ヘッダーさえ定義されていれば、カラムの順番を変更しても問題ない。CSVをシステムに取り込む処理があるならば必ずチェックしておきたいライブラリだ。

  
  
  

**MOONGIFTはこう見る**

  

CSVは昔のCGI時代から便利に使われてきたが、最近ではDBを使うことが多くなったので利用機会は減りつつある。とは言え、バッチでのデータ処理ではまだまだ現役だ。ビジネス向けのシステムでは必ずこのCSV取り込み処理が望まれるはずだ。

  

一つ、二つであればごりごりとコードを書いても良いだろうが、ユーザが作るファイルなので間違いも起きやすい。その度にコードを変更しているとバグも混入しやすい。Fight CSV!を使っていれば可読性の高い状態でコードが書けるのですっきりとまとまるはずだ。煩雑化しやすい箇所だからこそ、専用のライブラリを活用していきたい。

  

[fight\_csv | RubyGems.org | your community gem host](http://rubygems.org/gems/fight_csv)

  

[railslove/fight\_csv - GitHub](https://github.com/railslove/fight_csv)

